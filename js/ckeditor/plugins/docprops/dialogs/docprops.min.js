CKEDITOR.dialog.add("docProps",function(e){var h=e.lang.docprops,i=e.lang.common,j={};function f(p,o){var q=function(){r(this);o(this,this._.parentDialog)};var r=function(s){s.removeListener("ok",q);s.removeListener("cancel",r)};var n=function(s){s.on("ok",q);s.on("cancel",r)};e.execCommand(p);if(e._.storedDialogs.colordialog){n(e._.storedDialogs.colordialog)}else{CKEDITOR.on("dialogDefinition",function(t){if(t.data.name!=p){return}var s=t.data.definition;t.removeListener();s.onLoad=CKEDITOR.tools.override(s.onLoad,function(u){return function(){n(this);s.onLoad=u;if(typeof u=="function"){u.call(this)}}})})}}function g(){var n=this.getDialog(),o=n.getContentElement("general",this.id+"Other");if(!o){return}if(this.getValue()=="other"){o.getInputElement().removeAttribute("readOnly");o.focus();o.getElement().removeClass("cke_disabled")}else{o.getInputElement().setAttribute("readOnly",true);o.getElement().addClass("cke_disabled")}}function c(o,n,p){return function(q,t,s){var r=j,v=typeof p!="undefined"?p:this.getValue();if(!v&&(o in r)){r[o].remove()}else{if(v&&(o in r)){r[o].setAttribute("content",v)}else{if(v){var u=new CKEDITOR.dom.element("meta",e.document);u.setAttribute(n?"http-equiv":"name",o);u.setAttribute("content",v);s.append(u)}}}}}function m(n,o){return function(){var p=j,q=(n in p)?p[n].getAttribute("content")||"":"";if(o){return q}this.setValue(q);return null}}function b(n){return function(p,r,q,o){o.removeAttribute("margin"+n);var s=this.getValue();if(s!==""){o.setStyle("margin-"+n,CKEDITOR.tools.cssLength(s))}else{o.removeStyle("margin-"+n)}}}function d(o){var p={},s=o.getElementsByTag("meta"),n=s.count();for(var q=0;q<n;q++){var r=s.getItem(q);p[r.getAttribute(r.hasAttribute("http-equiv")?"http-equiv":"name").toLowerCase()]=r}return p}function l(n,o,p){n.removeStyle(o);if(n.getComputedStyle(o)!=p){n.setStyle(o,p)}}var a=function(o,p,n){return{type:"hbox",padding:0,widths:["60%","40%"],children:[CKEDITOR.tools.extend({type:"text",id:o,label:h[p]},n||{},1),{type:"button",id:o+"Choose",label:h.chooseColor,className:"colorChooser",onClick:function(){var q=this;f("colordialog",function(r){var s=q.getDialog();s.getContentElement(s._.currentTabId,o).setValue(r.getContentElement("picker","selectedColor").getValue())})}}]}};var k="javascript:void((function(){"+encodeURIComponent("document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+'document.write( \'<html style="background-color: #ffffff; height: 100%"><head></head><body style="width: 100%; height: 100%; margin: 0px">'+h.previewHtml+"</body></html>' );document.close();")+"})())";return{title:h.title,minHeight:330,minWidth:500,onShow:function(){var o=e.document,q=o.getElementsByTag("html").getItem(0),p=o.getHead(),n=o.getBody();j=d(o);this.setupContent(o,q,p,n)},onHide:function(){j={}},onOk:function(){var o=e.document,q=o.getElementsByTag("html").getItem(0),p=o.getHead(),n=o.getBody();this.commitContent(o,q,p,n)},contents:[{id:"general",label:i.generalTab,elements:[{type:"text",id:"title",label:h.docTitle,setup:function(n){this.setValue(n.getElementsByTag("title").getItem(0).data("cke-title"))},commit:function(o,q,p,n,r){if(r){return}o.getElementsByTag("title").getItem(0).data("cke-title",this.getValue())}},{type:"hbox",children:[{type:"select",id:"dir",label:i.langDir,style:"width: 100%",items:[[i.notSet,""],[i.langDirLtr,"ltr"],[i.langDirRtl,"rtl"]],setup:function(o,q,p,n){this.setValue(n.getDirection()||"")},commit:function(o,q,p,n){var r=this.getValue();if(r){n.setAttribute("dir",r)}else{n.removeAttribute("dir")}n.removeStyle("direction")}},{type:"text",id:"langCode",label:i.langCode,setup:function(n,o){this.setValue(o.getAttribute("xml:lang")||o.getAttribute("lang")||"")},commit:function(o,q,p,n,r){if(r){return}var s=this.getValue();if(s){q.setAttributes({"xml:lang":s,lang:s})}else{q.removeAttributes({"xml:lang":1,lang:1})}}}]},{type:"hbox",children:[{type:"select",id:"charset",label:h.charset,style:"width: 100%",items:[[i.notSet,""],[h.charsetASCII,"us-ascii"],[h.charsetCE,"iso-8859-2"],[h.charsetCT,"big5"],[h.charsetCR,"iso-8859-5"],[h.charsetGR,"iso-8859-7"],[h.charsetJP,"iso-2022-jp"],[h.charsetKR,"iso-2022-kr"],[h.charsetTR,"iso-8859-9"],[h.charsetUN,"utf-8"],[h.charsetWE,"iso-8859-1"],[h.other,"other"]],"default":"",onChange:function(){this.getDialog().selectedCharset=this.getValue()!="other"?this.getValue():"";g.call(this)},setup:function(){this.metaCharset=("charset" in j);var n=m(this.metaCharset?"charset":"content-type",1,1),p=n.call(this);!this.metaCharset&&p.match(/charset=[^=]+$/)&&(p=p.substring(p.indexOf("=")+1));if(p){this.setValue(p.toLowerCase());if(!this.getValue()){this.setValue("other");var o=this.getDialog().getContentElement("general","charsetOther");o&&o.setValue(p)}this.getDialog().selectedCharset=p}g.call(this)},commit:function(o,r,q,n,s){if(s){return}var u=this.getValue(),t=this.getDialog().getContentElement("general","charsetOther");u=="other"&&(u=t?t.getValue():"");u&&!this.metaCharset&&(u=(j["content-type"]?j["content-type"].getAttribute("content").split(";")[0]:"text/html")+"; charset="+u);var p=c(this.metaCharset?"charset":"content-type",1,u);p.call(this,o,r,q)}},{type:"text",id:"charsetOther",label:h.charsetOther,onChange:function(){this.getDialog().selectedCharset=this.getValue()}}]},{type:"hbox",children:[{type:"select",id:"docType",label:h.docType,style:"width: 100%",items:[[i.notSet,""],["XHTML 1.1",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">'],["XHTML 1.0 Transitional",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">'],["XHTML 1.0 Strict",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">'],["XHTML 1.0 Frameset",'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">'],["HTML 5","<!DOCTYPE html>"],["HTML 4.01 Transitional",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">'],["HTML 4.01 Strict",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">'],["HTML 4.01 Frameset",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">'],["HTML 3.2",'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">'],["HTML 2.0",'<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">'],[h.other,"other"]],onChange:g,setup:function(){if(e.docType){this.setValue(e.docType);if(!this.getValue()){this.setValue("other");var n=this.getDialog().getContentElement("general","docTypeOther");n&&n.setValue(e.docType)}}g.call(this)},commit:function(o,q,p,n,r){if(r){return}var t=this.getValue(),s=this.getDialog().getContentElement("general","docTypeOther");e.docType=t=="other"?(s?s.getValue():""):t}},{type:"text",id:"docTypeOther",label:h.docTypeOther}]},{type:"checkbox",id:"xhtmlDec",label:h.xhtmlDec,setup:function(){this.setValue(!!e.xmlDeclaration)},commit:function(o,q,p,n,r){if(r){return}if(this.getValue()){e.xmlDeclaration='<?xml version="1.0" encoding="'+(this.getDialog().selectedCharset||"utf-8")+'"?>';q.setAttribute("xmlns","http://www.w3.org/1999/xhtml")}else{e.xmlDeclaration="";q.removeAttribute("xmlns")}}}]},{id:"design",label:h.design,elements:[{type:"hbox",widths:["60%","40%"],children:[{type:"vbox",children:[a("txtColor","txtColor",{setup:function(o,q,p,n){this.setValue(n.getComputedStyle("color"))},commit:function(o,q,p,n,r){if(this.isChanged()||r){n.removeAttribute("text");var s=this.getValue();if(s){n.setStyle("color",s)}else{n.removeStyle("color")}}}}),a("bgColor","bgColor",{setup:function(o,q,p,n){var r=n.getComputedStyle("background-color")||"";this.setValue(r=="transparent"?"":r)},commit:function(o,q,p,n,r){if(this.isChanged()||r){n.removeAttribute("bgcolor");var s=this.getValue();if(s){n.setStyle("background-color",s)}else{l(n,"background-color","transparent")}}}}),{type:"hbox",widths:["60%","40%"],padding:1,children:[{type:"text",id:"bgImage",label:h.bgImage,setup:function(o,q,p,n){var r=n.getComputedStyle("background-image")||"";
if(r=="none"){r=""}else{r=r.replace(/url\(\s*(["']?)\s*([^\)]*)\s*\1\s*\)/i,function(s,t,u){return u})}this.setValue(r)},commit:function(o,q,p,n){n.removeAttribute("background");var r=this.getValue();if(r){n.setStyle("background-image","url("+r+")")}else{l(n,"background-image","none")}}},{type:"button",id:"bgImageChoose",label:i.browseServer,style:"display:inline-block;margin-top:10px;",hidden:true,filebrowser:"design:bgImage"}]},{type:"checkbox",id:"bgFixed",label:h.bgFixed,setup:function(o,q,p,n){this.setValue(n.getComputedStyle("background-attachment")=="fixed")},commit:function(o,q,p,n){if(this.getValue()){n.setStyle("background-attachment","fixed")}else{l(n,"background-attachment","scroll")}}}]},{type:"vbox",children:[{type:"html",id:"marginTitle",html:'<div style="text-align: center; margin: 0px auto; font-weight: bold">'+h.margin+"</div>"},{type:"text",id:"marginTop",label:h.marginTop,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(o,q,p,n){this.setValue(n.getStyle("margin-top")||n.getAttribute("margintop")||"")},commit:b("top")},{type:"hbox",children:[{type:"text",id:"marginLeft",label:h.marginLeft,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(o,q,p,n){this.setValue(n.getStyle("margin-left")||n.getAttribute("marginleft")||"")},commit:b("left")},{type:"text",id:"marginRight",label:h.marginRight,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(o,q,p,n){this.setValue(n.getStyle("margin-right")||n.getAttribute("marginright")||"")},commit:b("right")}]},{type:"text",id:"marginBottom",label:h.marginBottom,style:"width: 80px; text-align: center",align:"center",inputStyle:"text-align: center",setup:function(o,q,p,n){this.setValue(n.getStyle("margin-bottom")||n.getAttribute("marginbottom")||"")},commit:b("bottom")}]}]}]},{id:"meta",label:h.meta,elements:[{type:"textarea",id:"metaKeywords",label:h.metaKeywords,setup:m("keywords"),commit:c("keywords")},{type:"textarea",id:"metaDescription",label:h.metaDescription,setup:m("description"),commit:c("description")},{type:"text",id:"metaAuthor",label:h.metaAuthor,setup:m("author"),commit:c("author")},{type:"text",id:"metaCopyright",label:h.metaCopyright,setup:m("copyright"),commit:c("copyright")}]},{id:"preview",label:i.preview,elements:[{type:"html",id:"previewHtml",html:'<iframe src="'+k+'" style="width: 100%; height: 310px" hidefocus="true" frameborder="0"></iframe>',onLoad:function(){var n=this.getElement();this.getDialog().on("selectPage",function(o){if(o.data.page=="preview"){var p=this;setTimeout(function(){var r=n.getFrameDocument(),t=r.getElementsByTag("html").getItem(0),s=r.getHead(),q=r.getBody();p.commitContent(r,t,s,q,1)},50)}});n.getAscendant("table").setStyle("height","100%")}}]}]}});