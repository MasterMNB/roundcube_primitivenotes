(function(t,n){function e(){}function i(){}function r(){}function o(t,n){"string"==typeof n&&(n=n.split("."));var e,i=n.join(".").replace(/\.(\w)/g,function(t,n){return n.toUpperCase()}),r=n.shift();return typeof(e=t[i])!=c?e=e:typeof(e=t[r])!=c&&n.length>0&&(e=o(e,n)),e}function a(){function t(t,n){r.bind(t,function(){return n.apply(i,arguments)})}var n,e=f.apply(arguments),i=this,r=1===e.length?i:e.shift();e=e[0]||{};for(n in e)t(n,e[n])}function u(t,n){return{input:t,form:n}}var s,p=(JSON||{}).stringify,f=Array.prototype.slice,c="undefined",h="item.manager",g="plugins",l="ext",d="html.wrap",m="html.hidden",y="keys",v="preInvalidate",x="postInvalidate",w="getFormData",D="setFormData",I="setInputData",_="postInit",P="ready",E={itemManager:i,plugins:[],ext:{},html:{wrap:'<div class="text-core"><div class="text-wrap"/></div>',hidden:'<input type="hidden" />'},keys:{8:"backspace",9:"tab",13:"enter!",27:"escape!",37:"left",38:"up!",39:"right",40:"down!",46:"delete",108:"numpadEnter"}};if(!p)throw new Error("JSON.stringify() not found");s=i.prototype,s.init=function(t){},s.filter=function(t,n){var e,i,r=[];for(e=0;e<t.length;e++)i=t[e],this.itemContains(i,n)&&r.push(i);return r},s.itemContains=function(t,n){return 0==this.itemToString(t).toLowerCase().indexOf(n.toLowerCase())},s.stringToItem=function(t){return t},s.itemToString=function(t){return t},s.compareItems=function(t,n){return t==n},s=e.prototype,s.init=function(n,e){var i,r,o,a=this;a._defaults=t.extend({},E),a._opts=e||{},a._plugins={},a._itemManager=r=new(a.opts(h)),n=t(n),o=t(a.opts(d)),i=t(a.opts(m)),n.wrap(o).keydown(function(t){return a.onKeyDown(t)}).keyup(function(t){return a.onKeyUp(t)}).data("textext",a),t(a).data({hiddenInput:i,wrapElement:n.parents(".text-wrap").first(),input:n}),i.attr("name",n.attr("name")),n.attr("name",null),i.insertAfter(n),t.extend(!0,r,a.opts(l+".item.manager")),t.extend(!0,a,a.opts(l+".*"),a.opts(l+".core")),a.originalWidth=n.outerWidth(),a.invalidateBounds(),r.init(a),a.initPatches(),a.initPlugins(a.opts(g),t.fn.textext.plugins),a.on({setFormData:a.onSetFormData,getFormData:a.onGetFormData,setInputData:a.onSetInputData,anyKeyUp:a.onAnyKeyUp}),a.trigger(_),a.trigger(P),a.getFormData(0)},s.initPatches=function(){var n,e=[],i=t.fn.textext.patches;for(n in i)e.push(n);this.initPlugins(e,i)},s.initPlugins=function(n,e){var i,r,o,a=this,u=[];for("string"==typeof n&&(n=n.split(/\s*,\s*|\s+/g)),o=0;o<n.length;o++)i=n[o],r=e[i],r&&(a._plugins[i]=r=new r,a[i]=function(t){return function(){return t}}(r),u.push(r),t.extend(!0,r,a.opts(l+".*"),a.opts(l+"."+i)));for(u.sort(function(t,n){return t=t.initPriority(),n=n.initPriority(),t===n?0:t<n?1:-1}),o=0;o<u.length;o++)u[o].init(a)},s.hasPlugin=function(t){return!!this._plugins[t]},s.on=a,s.bind=function(t,n){this.input().bind(t,n)},s.trigger=function(){var t=arguments;this.input().trigger(t[0],f.call(t,1))},s.itemManager=function(){return this._itemManager},s.input=function(){return t(this).data("input")},s.opts=function(t){var n=o(this._opts,t);return"undefined"==typeof n?o(this._defaults,t):n},s.wrapElement=function(){return t(this).data("wrapElement")},s.invalidateBounds=function(){var t=this,n=t.input(),e=t.wrapElement(),i=e.parent(),r="100%";t.trigger(v),height=n.outerHeight()+"px",n.css({width:r}),e.css({width:r,height:height}),i.css({height:height}),t.trigger(x)},s.focusInput=function(){this.input()[0].focus()},s.serializeData=p,s.hiddenInput=function(n){return t(this).data("hiddenInput")},s.getWeightedEventResponse=function(t,n){var e=this,i={},r=0;e.trigger(t,i,n);for(var o in i)r=Math.max(r,o);return i[r]},s.getFormData=function(t){var n=this,e=n.getWeightedEventResponse(w,t||0);n.trigger(D,e.form),n.trigger(I,e.input)},s.onAnyKeyUp=function(t,n){this.getFormData(n)},s.onSetInputData=function(t,n){this.input().val(n)},s.onSetFormData=function(t,n){var e=this;e.hiddenInput().val(e.serializeData(n))},s.onGetFormData=function(t,n){var e=this.input().val();n[0]=u(e,e)},t(["Down","Up"]).each(function(){var t=this.toString();s["onKey"+t]=function(n){var e=this,i=e.opts(y)[n.keyCode],r=!0;return i&&(r="!"!=i.substr(-1),i=i.replace("!",""),e.trigger(i+"Key"+t),"Up"==t&&e._lastKeyDown==n.keyCode&&(e._lastKeyDown=null,e.trigger(i+"KeyPress")),"Down"==t&&(e._lastKeyDown=n.keyCode)),e.trigger("anyKey"+t,n.keyCode),r}}),s=r.prototype,s.on=a,s.formDataObject=u,s.init=function(t){throw new Error("Not implemented")},s.baseInit=function(n,e){var i=this;n._defaults=t.extend(!0,n._defaults,e),i._core=n,i._timers={}},s.startTimer=function(t,n,e){var i=this;i.stopTimer(t),i._timers[t]=setTimeout(function(){delete i._timers[t],e.apply(i)},1e3*n)},s.stopTimer=function(t){clearTimeout(this._timers[t])},s.core=function(){return this._core},s.opts=function(t){return this.core().opts(t)},s.itemManager=function(){return this.core().itemManager()},s.input=function(){return this.core().input()},s.val=function(t){var n=this.input();return typeof t===c?n.val():void n.val(t)},s.trigger=function(){var t=this.core();t.trigger.apply(t,arguments)},s.bind=function(t,n){this.core().bind(t,n)},s.initPriority=function(){return 0};var T=!1,K=t.fn.textext=function(n){var i;return T||null==(i=t.fn.textext.css)||(t("head").append("<style>"+i+"</style>"),T=!0),this.map(function(){var i=t(this);if(null==n)return i.data("textext");var r=new e;return r.init(i,n),i.data("textext",r),r.input()[0]})};K.addPlugin=function(t,n){K.plugins[t]=n,n.prototype=new K.TextExtPlugin},K.addPatch=function(t,n){K.patches[t]=n,n.prototype=new K.TextExtPlugin},K.TextExt=e,K.TextExtPlugin=r,K.ItemManager=i,K.plugins={},K.patches={}})(jQuery),function(t){function n(){}t.fn.textext.TextExtIE9Patches=n,t.fn.textext.addPatch("ie9",n);var e=n.prototype;e.init=function(t){if(navigator.userAgent.indexOf("MSIE 9")!=-1){var n=this;t.on({postInvalidate:n.onPostInvalidate})}},e.onPostInvalidate=function(){var t=this,n=t.input(),e=n.val();n.val(Math.random()),n.val(e)}}(jQuery);